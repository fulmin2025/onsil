<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장례식장 찾기 - On-sil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: "#1B2B48" },
                        secondary: { DEFAULT: "#FAFAFA" },
                        accent: { DEFAULT: "#C5A065" },
                    },
                    fontFamily: {
                        sans: ['Pretendard', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .map-pin {
            transition: transform 0.2s;
            /* Counter-scale pins based on map zoom */
            transform: translate(-50%, -50%) scale(calc(1 / var(--map-scale, 1)));
        }

        .map-pin:hover {
            /* Hover scale relative to counter-scale */
            transform: translate(-50%, -50%) scale(calc(1.2 / var(--map-scale, 1)));
            z-index: 50;
        }

        #map-view {
            cursor: grab;
        }

        #map-view:active {
            cursor: grabbing;
        }

        /* Map Region Styles */
        #map-content svg text {
            fill: white;
            font-family: 'Pretendard', sans-serif;
            font-size: 4px;
            pointer-events: none;
        }

        #map-content svg path {
            fill: #1B2B48;
            fill-opacity: 0.5;
            stroke: white;
            stroke-width: 0.5px;
            transition: fill 0.2s;
        }

        #map-content svg path:hover {
            fill: #C5A065;
            fill-opacity: 1;
            cursor: pointer;
        }

        /* Prevent selection during zoom interaction */
        #map-view {
            user-select: none;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <a href="index.html" class="font-bold text-xl text-[#1B2B48]">On-sil</a>
            <nav class="hidden md:flex gap-6">
                <a href="search.html" class="font-medium text-[#1B2B48]">장례식장 찾기</a>
                <a href="guide.html" class="font-medium text-gray-600 hover:text-[#1B2B48]">장례 가이드</a>
                <a href="community.html" class="font-medium text-gray-600 hover:text-[#1B2B48]">후기</a>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-8 text-[#1B2B48]">안심 장례식장 찾기</h1>

        <div class="flex flex-col md:flex-row gap-8">
            <!-- Sidebar Filters -->
            <aside class="w-full md:w-64 space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="font-bold mb-4">지역 선택</h3>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" value="seoul" class="filter-checkbox rounded" checked> 서울
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" value="gyeonggi" class="filter-checkbox rounded" checked> 경기
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" value="incheon" class="filter-checkbox rounded" checked> 인천
                        </label>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="font-bold mb-4">시설 옵션</h3>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" value="visit" class="filter-checkbox rounded"> 참관실 보유
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" value="ensa" class="filter-checkbox rounded"> 봉안당 있음
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" value="lucete" class="filter-checkbox rounded"> 루세떼 제작
                        </label>
                    </div>
                </div>
            </aside>

            <!-- List & Map Area -->
            <div class="flex-1">
                <!-- View Toggle -->
                <div class="flex justify-end mb-4 gap-2">
                    <button id="btn-list-view"
                        class="px-4 py-2 bg-[#1B2B48] text-white rounded-md text-sm font-bold shadow-sm flex items-center gap-2">
                        <i class="fas fa-list"></i> 목록 보기
                    </button>
                    <button id="btn-map-view"
                        class="px-4 py-2 bg-white text-gray-600 border rounded-md text-sm font-bold shadow-sm hover:bg-gray-50 flex items-center gap-2">
                        <i class="fas fa-map-marker-alt"></i> 지도 보기
                    </button>
                </div>

                <!-- List View -->
                <div id="result-list" class="space-y-6">
                    <!-- Item 1: Gimpo -->
                    <div class="search-item bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow flex flex-col md:flex-row gap-6"
                        data-region="gyeonggi" data-facilities="visit,ensa">
                        <div
                            class="w-full md:w-48 h-32 bg-gray-200 rounded-lg bg-[url('https://images.unsplash.com/photo-1596230526487-11152a4a754b?w=500')] bg-cover bg-center">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <span class="bg-[#1B2B48] text-white text-xs px-2 py-1 rounded">안심 인증</span>
                                    <h3 class="text-xl font-bold mt-1">포포즈 장례식장 김포점</h3>
                                </div>
                                <span class="text-[#C5A065] font-bold">★ 4.9 (128)</span>
                            </div>
                            <p class="text-gray-500 text-sm mb-4">경기 김포시 통진읍 · 24시간 운영</p>
                            <div class="flex gap-2 text-sm text-gray-600 mb-4">
                                <span class="px-2 py-1 bg-gray-100 rounded">개별 추모실</span>
                                <span class="px-2 py-1 bg-gray-100 rounded">봉안당</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg">기본 장례 200,000원~</span>
                                <button class="bg-[#1B2B48] text-white px-4 py-2 rounded hover:bg-[#1B2B48]/90">상담
                                    신청</button>
                            </div>
                        </div>
                    </div>

                    <!-- Item 2: Bucheon (Gangmingming) -->
                    <div class="search-item bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow flex flex-col md:flex-row gap-6"
                        data-region="gyeonggi" data-facilities="visit,ensa">
                        <div
                            class="w-full md:w-48 h-32 bg-gray-200 rounded-lg bg-[url('https://images.unsplash.com/photo-1596230526487-11152a4a754b?w=500')] bg-cover bg-center">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <span class="bg-[#1B2B48] text-white text-xs px-2 py-1 rounded">안심 인증</span>
                                    <h3 class="text-xl font-bold mt-1">강밍밍 장례식장 부천점</h3>
                                </div>
                                <span class="text-[#C5A065] font-bold">★ 4.9 (128)</span>
                            </div>
                            <p class="text-gray-500 text-sm mb-4">경기 부천시 도당동 · 24시간 운영</p>
                            <div class="flex gap-2 text-sm text-gray-600 mb-4">
                                <span class="px-2 py-1 bg-gray-100 rounded">개별 추모실</span>
                                <span class="px-2 py-1 bg-gray-100 rounded">봉안당</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg">기본 장례 250,000원~</span>
                                <button class="bg-[#1B2B48] text-white px-4 py-2 rounded hover:bg-[#1B2B48]/90">상담
                                    신청</button>
                            </div>
                        </div>
                    </div>

                    <!-- Item 3: Gwangju -->
                    <div class="search-item bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow flex flex-col md:flex-row gap-6"
                        data-region="gyeonggi" data-facilities="visit,lucete">
                        <div
                            class="w-full md:w-48 h-32 bg-gray-200 rounded-lg bg-[url('https://images.unsplash.com/photo-1493863641943-9b68992a8d07?w=500')] bg-cover bg-center">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <span class="bg-[#1B2B48] text-white text-xs px-2 py-1 rounded">안심 인증</span>
                                    <h3 class="text-xl font-bold mt-1">21그램 장례식장 경기광주점</h3>
                                </div>
                                <span class="text-[#C5A065] font-bold">★ 4.8 (95)</span>
                            </div>
                            <p class="text-gray-500 text-sm mb-4">경기 광주시 오포읍 · 24시간 운영</p>
                            <div class="flex gap-2 text-sm text-gray-600 mb-4">
                                <span class="px-2 py-1 bg-gray-100 rounded">루세떼</span>
                                <span class="px-2 py-1 bg-gray-100 rounded">픽업 서비스</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg">기본 장례 250,000원~</span>
                                <button class="bg-[#1B2B48] text-white px-4 py-2 rounded hover:bg-[#1B2B48]/90">상담
                                    신청</button>
                            </div>
                        </div>
                    </div>

                    <!-- Item 4: Seoul -->
                    <div class="search-item bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow flex flex-col md:flex-row gap-6"
                        data-region="seoul" data-facilities="visit,ensa">
                        <div
                            class="w-full md:w-48 h-32 bg-gray-200 rounded-lg bg-[url('https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?w=500')] bg-cover bg-center">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <span class="bg-[#1B2B48] text-white text-xs px-2 py-1 rounded">안심 인증</span>
                                    <h3 class="text-xl font-bold mt-1">펫포레스트 서울점</h3>
                                </div>
                                <span class="text-[#C5A065] font-bold">★ 4.7 (88)</span>
                            </div>
                            <p class="text-gray-500 text-sm mb-4">서울 강남구 · 24시간 운영</p>
                            <div class="flex gap-2 text-sm text-gray-600 mb-4">
                                <span class="px-2 py-1 bg-gray-100 rounded">도심형</span>
                                <span class="px-2 py-1 bg-gray-100 rounded">봉안당</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-lg">기본 장례 300,000원~</span>
                                <button class="bg-[#1B2B48] text-white px-4 py-2 rounded hover:bg-[#1B2B48]/90">상담
                                    신청</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map View (Hidden by default) -->
                <div id="map-view" class="hidden h-[600px] bg-blue-50 rounded-xl relative overflow-hidden border">
                    <!-- Map Container for Zooming -->
                    <div id="map-content"
                        class="relative transition-transform duration-200 ease-out origin-center aspect-[130/204] h-full w-auto mx-auto my-auto bg-[#F8FAFC]">
                        <!-- Map Image: Inline SVG -->
                        <svg class="absolute inset-0 w-full h-full object-contain bg-gray-100"
                            preserveAspectRatio="xMidYMid meet" version="1.1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 130 204" xml:space="preserve">
                            <g id="layer_2">
                                <path d="M31.1,51c0.3-3.5-1.3-5.5-3.8-5.6
                                    c-2.5-0.2-2.2,5.2-6.6,0c-4.4-5.2-0.8-4.9-1.5-6.2c-0.7-1.3-3.7-0.7-4.6-1.3c-0.8-0.7-2-1.5-0.7-3c1.4-1.5,1.7-2.5,3-3.9
                                    c1.4-1.3,2.4,0.6,4-0.7c0.6-0.5,1-3,2.7-2.2s2.6,2.4,3.2,3.2c0,0,0.7,1.4,3,0.9l0,0l0.2-0.1c4.2-2,4.5-3.7,2.9-5.5
                                    c-1.6-1.8-1.1,0,2.9-2.7c4-2.7,1.6-3.5-1.2-4.8s-0.7-2.1,0-2.2c0.9-0.2,3.3-1.8,3.9-2.2s9-2.5,9-2.5l0.2-0.1
                                    c2.4-1.3,3.8-2.8,4.7-1.6c0.8,1.2,2.7,2.4,4.7,0.5c2-1.9,5.1-1.8,5.2-0.8c0.2,1,0.8,2.2,3.5,2c2.7-0.2,11.3,0.4,11.3-2.7
                                    c0-3.1,4.7-3.2,5.6-2.4c0.8,0.8,1.3,4.5,2-0.4c0.7-5,2.7-8.2,5.1-2.4c2.4,5.7,1.7,6.2,2.9,7.4c1.2,1.2,1.9,3.2,1.9,5.2
                                    c0,2,4.6,6.1,6.2,8.6c1.7,2.5,6.4,7.1,7.8,8.8c1,1.2,2.2,7.4,4.2,10.3c2,2.9,4.3,3.4,5.9,9.1c0.7,2.6,0.8,2.8,0.8,2.8l0.1,0.1
                                    c0,0,1.3,2.9,2.6,4c1.3,1.1,0.1,6.2,0,6.9c-0.1,0.7-1,1.6,0.2,2.7c1.5,1.4,0.3,6.2,0,8.9c-0.3,2.7,1.7,6.8,0.7,8.6
                                    c-1,1.9-2.3-0.5-2,4c0.3,4.6,0.8,6.3,1.2,7.6c0.3,1.3-0.2,2.7,0.3,3.7c0.5,1,3.2-0.5,3.4-1.7c0.2-1.2,2.5-1.3,2.2,1
                                    c-0.3,2.4,1.2,3.4,0,5.7c-1.2,2.4-0.9,3.5-1.9,5.4c-1,1.9-1.9,1.4-0.8,3.2c0,0,0.3,0.8,0.2,1.4c-0.2,3-0.4,6.9-1.8,8.2
                                    c-2,1.8-2.3,2.1-2,2.8c0.7,1.4-1.5,4.2-1.5,4.2l-0.3,0.8c-1.1,2.7-1.9,4.1-1.9,4.1c-1.6,4.1-3.7,3.6-4,3.1c-0.4-0.5-3-0.7-3,0.6
                                    c0,1.3-1.6,2.2-1.6,2.2c-5.4,1.5-6.6,3.1-6.6,3.1l-0.2,0.2c-0.6,0.6-0.6,3.4-0.6,3.4c-0.2,5.2-3.4,9.3-5.9,9.2s-7.2-0.1-7.8-3.7
                                    s-2.5-1.9-3.2-1.3c-0.8,0.6-3.9,1.2-4.8,1c-0.9-0.1-1.9,0.6-2.1,2.5c0,0,0.7,1.9-1.7,0.8c-2.4-1.1-4.1-1-5.8-0.6v0l-0.2,1
                                    c-0.7,1.4-0.7,5.2-7.6,3c-6.9-2.2-2.5,2-2.7,4.6c-0.2,2.5-1.3,3.7-4.9,2.4c-3.5-1.3-2,2-3.7,2c-1.7,0-4.6-0.3-5.1,0.5
                                    c-0.5,0.8,0.2,3.4-1.3,4.2c-1.5,0.8-2.5,0.7-6.1,0.5c-3.5-0.2-8.9-0.2-8.9-0.2l-5.4-2c0,0-3.4-1.7-4.4-1.5c-1,0.2-4.9,1.3-6.1,1.3
                                    c-1.2,0,5.4,6.3-3.7,5.6c-4.9,4.6-6.5,1.8-6.8,0c-0.2-0.8-3.3,1-1.9-2.5c1.4-3.5,3.4-7.9,5.7-9.1c0.8-0.4,3.7-1.9-0.5-3.2
                                    c-4.2-1.3-1.7-2-1.7-3.9c0-1.9-0.8-1.5-1.5-3c-0.7-1.5-0.2-2.4,0.7-3.2c0.9-0.8,2.9,0.3,2.4-4.4c-0.2-1.4,0.5-1.1,2.2-1.5
                                    c2.8-0.7,3.4-2.7,0.7-4.2c-2.7-1.5-4.2-4-0.7-4.4c3.5-0.3,5.1,0.5,7.1,0c2-0.5,4.6-1,3-4.2c-1.5-3.2,1.9-4.2,2-5.2s-0.9-0.8,0-2.5
                                    c0.2-0.3,0.7-0.6,0.7-0.6s0.2-2.2,0.8-2.8c0.7-0.6,1.4-0.4,0.9-2.5c-0.5-2.2,2.6-4,2.8-4.1c0.1-0.1,5.3-3.8,1.5-8.8
                                    c0,0-4.4-3.8-1.3-4.2l3.5-0.8l0,0L27,101c-3.9-3.6-2.4-4.1-1.2-4.9c1.2-0.8,1-5.4-2.7-5.7c-3.7-0.3-5.9-4.2-4.6-7.3
                                    c1.4-3-0.7-5.7-3.2-4.1c-2.5,1.7-2.5-1.7-2.2-4c0.3-2.4-0.2-4.9,1-6.1c0.7-0.7,7.3-6.1,7.9-6.4c0.7-0.3,1.9-1.3,5.2,0
                                    c3.4,1.3,4.1,1.6,4.4,1.7c0,0,1,0.3,1.9,0.1c0.3-0.1,0-0.5,0-0.5c-0.1-0.4-3.5-4.1-4.6-5.8c-1.2-1.7-0.5-3.1,0.9-3.6
                                    C31.2,53.9,31.1,51,31.1,51z" />
                                <path d="M21.5,189.2c0,0-2.2,3.3-6.1,3.9
                                    c-3.9,0.6-2.5,5.8-0.3,7.2c2.2,1.4,3,3.7,6.1,1.6c1.6-1.1,4.8,0.1,8.8-0.3c1.6-0.1,11.5-4.8,10.8-8.9c-0.8-4.1-2.7-6.6-7-5.3
                                    c-4.3,1.3-7.5,1.1-8.7,1.1C23.8,188.6,22.8,188.3,21.5,189.2z" />
                            </g>
                            <g id="layer_1">
                                <path class="region" data-region_id="39" d="M21.5,188.9c0,0-2.2,3.3-6.1,3.9c-3.9,0.6-2.5,5.8-0.3,7.2
                                    c2.2,1.4,3,3.7,6.1,1.6c1.6-1.1,4.8,0.1,8.8-0.3c1.6-0.1,11.5-4.8,10.8-8.9c-0.8-4.1-2.7-6.6-7-5.3c-4.3,1.3-7.5,1.1-8.7,1.1
                                    C23.8,188.4,22.8,188.1,21.5,188.9z" />
                                <path class="region" data-region_id="38"
                                    d="M106.3,136.8c-2.1,0.9-1.9,2.7-1.9,2.7c-1.5,4.1-3.7,2.6-4.8,1.8
                                    c-1.1-0.8-2.7-1.8-2.9-0.6c-0.2,1.2-3.3,2.7-3.3,2.7c-3.9,1.7-1.1,3.7-1.1,3.7c3.4,3.7,3.6,1.6,6-1.3c2.4-2.8,4.9,1.6,4.9,1.6
                                    c-0.6,0.6-0.7,3.5-0.7,3.5c-0.2,5.2-3.4,9.3-5.9,9.2c-2.5-0.1-7.2-0.1-7.8-3.7c-0.7-3.6-2.5-1.9-3.2-1.3c-0.8,0.6-3.9,1.2-4.8,1
                                    c-0.9-0.1-1.9,0.6-2.1,2.5c0,0,0.7,1.9-1.7,0.8c-2.4-1.1-4.1-1-5.8-0.6c0,0-0.4-0.8-0.4-4.2l0,0.1c0.4-4.6-0.8-3.3-1.3-4.5
                                    c-0.4-1.2-0.5-3.9-0.8-4.4c-0.3-0.5-3.8-2.3-4.5-5.1c-0.5-1.9-1.4-4.3-1.5-6.4l-0.1-0.3l0-0.5c-0.1-0.5,1.5-3.3,1.5-3.3
                                    c1-2.3-0.4-2.7-0.8-3.7c-0.4-1-1.1-4.1-0.2-4.8c0.9-0.7,1.3-2.3,1.3-2.3c0.6-7.4,8.4-8.6,8.4-8.6s8.4,3,9.2,3.5
                                    c0.8,0.5,2.3,2.4,1.5,4.1c0,0-0.4,2.2,4,1.9l0.3-0.1c0,0,5.3-0.4,7.4,1.2l0.4,0.4c0.9,1.1,6.4,1.9,9,1.5c2.6-0.3,2.9-1.8,4.7-2.3
                                    l1-0.5c0,0,0.4,2-0.9,3.2c-1.3,1.3,0.1,2,1.7,2.7c1.6,0.7,5.1,1.3,5.7,2.9C116.7,129.3,113.8,133.4,106.3,136.8z" />
                                <path class="region" data-region_id="21" d="M118.5,138.1c-1.6,4.1-3.7,3.6-4,3.1c-0.4-0.5-3-0.7-3,0.6c0,1.3-1.6,2.2-1.6,2.2c-5.4,1.5-6.7,3.3-6.7,3.3s-2.5-4.4-4.9-1.6c-2.4,2.9-2.6,5-6,1.3c0,0-2.8-2,1.1-3.7c0,0,3.1-1.4,3.3-2.7
                                    c0.2-1.2,1.8-0.2,2.9,0.6c1.1,0.8,3.4,2.4,4.8-1.8c0,0-0.1-1.8,1.9-2.7c7.5-3.4,10.3-7.7,10.4-7.5c0.2,0.5-0.1,4.8,3.8,4
                                    C121.1,133.2,118.5,138.1,118.5,138.1z" />
                                <path class="region" data-region_id="26"
                                    d="M122.2,129c-0.3-0.7-0.1-1.1,2-2.8c2-1.8,1.7-8.8,1.7-8.8
                                    c0,1.2-5.7,2-7.1,1.2c-1.5-0.9-2.3-1.7-4.7-1.2c-1,0.2-3.9,3.1-3.9,3.1s0.4,2-0.9,3.2c-1.3,1.3,0.1,2,1.7,2.7
                                    c1.6,0.7,5.1,1.3,5.7,2.9c0,0,0.1,4.4,3,4l0.8,0C120.5,133.3,122.8,130.4,122.2,129z" />
                                <path class="region" data-region_id="36" d="M70.6,154.5c0.4-4.6-0.8-3.3-1.3-4.5c-0.4-1.2-0.5-3.9-0.8-4.4c-0.3-0.5-3.8-2.3-4.5-5.1
                                    c-0.5-1.9-1.4-4.3-1.5-6.4l-0.1-0.3c-0.2-1.5-2.8-2.7-3.9-1.5c-0.7,0.7-3.9,2.5-5.3,1.9c-1.4-0.6-3-0.5-5.1,0.3
                                    c-2.1,0.8-4.2-3.5-5.5-4.4c-1.3-0.8-6-4.1-7.4-1.5c-1.4,2.6-5.6,5.2-5.6,5.2c-1.1,0-2.6-0.7-2.6-0.7c-1.5-1.2-4.1-4.9-4.1-4.9
                                    s-0.5-1.1-1.3,0.2c-1,1.6,0.2,1.5,0,2.5c-0.2,1-3.5,2-2,5.2c1.5,3.2-1,3.7-3,4.2c-2,0.5-3.5-0.3-7.1,0c-3.5,0.3-2,2.9,0.7,4.4
                                    c2.7,1.5,2.1,3.5-0.7,4.2c-1.7,0.4-2.4,0.1-2.2,1.5c0.6,4.7-1.5,3.5-2.4,4.4c-0.9,0.8-1.3,1.7-0.7,3.2c0.7,1.5,1.5,1.2,1.5,3
                                    c0,1.9-2.5,2.5,1.7,3.9c4.2,1.4,1.3,2.8,0.5,3.2c-2.4,1.2-4.4,5.6-5.7,9.1c-1.3,3.5,1.8,1.7,1.9,2.5c0.4,1.8,1.9,4.6,6.8,0
                                    c9.1,0.8,2.5-5.6,3.7-5.6c1.2,0,5.1-1.2,6.1-1.3c1-0.2,4.4,1.5,4.4,1.5l5.4,2c0,0,5.4,0,8.9,0.2c3.5,0.2,4.6,0.3,6.1-0.5
                                    c1.5-0.8,0.8-3.4,1.3-4.2c0.5-0.8,3.4-0.5,5.1-0.5c1.7,0,0.2-3.4,3.7-2c3.5,1.3,4.7,0.2,4.9-2.4c0.2-2.5-4.2-6.7,2.7-4.6
                                    c6.9,2.2,6.8-1.6,7.6-3l0.2-1C70.9,158.6,70.5,157.7,70.6,154.5" />
                                <path class="region" data-region_id="35"
                                    d="M27,105.6c-3.1,0.3,1.3,4.2,1.3,4.2c3.8,5-1.4,8.7-1.5,8.8c-0.1,0.1-3.2,2-2.8,4.1
                                    c0.5,2.3-0.5,2-0.9,2.5c-1.5,2.2-0.3,3.2-0.3,3.2s2.6,3.7,4.1,4.9c0,0,1.4,0.7,2.6,0.7c0,0,4.2-2.6,5.6-5.2
                                    c1.4-2.6,6.1,0.7,7.4,1.5c1.3,0.8,3.4,5.1,5.5,4.4c2.1-0.8,3.7-0.8,5.1-0.3c1.4,0.6,4.5-1.2,5.3-1.9c2.2-1.8,4.1,1.5,4,1
                                    c-0.1-0.5,1.5-3.3,1.5-3.3c1-2.3-0.4-2.7-0.8-3.7c-0.4-1-1.1-4.1-0.2-4.8c0.9-0.7,1.3-2.3,1.3-2.3c0.6-7.4,8.4-8.6,8.4-8.6
                                    c0-0.8-0.5-3.2-0.8-4.4c-0.3-1.2-6.8-1.9-6.8-1.9c0.6,2.5-6.2,2.1-7.9,1.6c-1.7-0.5-1.9-3.1-3.4-4.8c-1.4-1.7-4.1,1-5.5,2.1
                                    c-1.3,1.1-4,0.9-4-0.8c0.1-1.7-1.1-4.1-2.6-4.3c-1.5-0.3-2.9,1.7-4.3,5.1c-1.4,3.5-6.8,1.5-6.8,1.5L27,105.6z" />
                                <path class="region" data-region_id="33" d="M92.3,64.4c-1.1,1.9-0.7,4.1-0.7,4.1s1.4,5.6-4.8,3.1
                                    c-6.2-2.4-5.2,0-7.1,0.6c-1.9,0.6-3.6,3.5-5.4,5c-1.8,1.5-5.2,2.4-3.8,4.1c1.4,1.8,2.5,3.4,2,5.3c-0.4,1.9-3.1,3.5-2.4,5.1
                                    c0.8,1.6,2.8,2,5,2c2.2-0.1,2.6,1.8,0.9,4.4c-1.7,2.6-1.9,5.7-2.5,6.2l-1.7,1.6c-2.9-1.5-7-1.6-7-1.6l-0.2-1.1
                                    c-1.4-4-1.7-6.4-2.1-7.2c-1-2-3-1.2-3-1.2l0.6-1.3c0.1-0.3,0.4-2.5,0.6-3.4c0.2-0.9,0.2-2.7-0.1-3.4c-0.3-0.7-0.8-0.6-1.5-0.8
                                    c-0.7-0.2-3.3-2.3-3.3-2.3s-1.6-2.9-2.6-4.2c-3.2-4,0.7-4.9,0.7-4.9s7.2-1.4,1-6.6c0,0,2.2-4.2,3.1-4.7c0.9-0.5,3.3-0.9,4.5-1.6
                                    c1.2-0.7,4.2-3.3,4.2-3.3l0.6-0.5l0.3-0.3c0,0,5.6,1.7,7.1-3.2c0,0,1.1-2.6,1.9,0.5c0.8,3.1,4-0.8,4-0.8s1.7-1.7,3.7,1.3
                                    c1.9,3.1,0.6,2.3,6.4,3.7c0,0,2.8-0.2,3.5,3.4C94.3,62.7,93,63.3,92.3,64.4z" />
                                <path class="region" data-region_id="34" d="M54,74.8c7.2-2.1,1.1-6.4,1.1-6.4l-0.2-0.1c0,0-0.8,0.1-5-1.4
                                    c-4.2-1.5-7,0-7,0c-7.4,2.4-9.1-2.7-9.5-2.5c-0.4,0.2-1.9-0.1-1.9-0.1c-0.3-0.1-1-0.3-4.4-1.7c-3.4-1.3-4.6-0.3-5.2,0
                                    c-0.7,0.3-7.2,5.8-7.9,6.4c-1.2,1.2-0.7,3.7-1,6.1c-0.3,2.4-0.3,5.7,2.2,4c2.5-1.7,4.6,1,3.2,4c-1.3,3,0.8,6.9,4.6,7.3
                                    c3.7,0.3,3.9,4.9,2.7,5.7c-1.2,0.8-2.7,1.3,1.2,4.9l3.5,3.7c0,0,5.4,2,6.8-1.5c1.4-3.5,2.8-5.4,4.3-5.1s2.7,2.6,2.6,4.3
                                    c-0.1,1.7,2.6,1.9,4,0.8c1.4-1.1,4-3.9,5.5-2.1c1.4,1.7,1.7,4.3,3.4,4.8c1.7,0.5,9.1,1.4,7.7-2.5c-1.4-4-1.8-6.4-2.1-7.2
                                    c-0.8-1.8-2.4-1.4-3-1.1l-0.3,0.4c-0.9,1.3-0.8,1.1-1.1,1.4s-1.5,1.1-2.7,0.4c-1.3-0.7-3.6-0.1-4.1-5.7c-0.1-1.3,0.4-3.3,0.4-3.3
                                    s0-0.1-1.5-0.4c-1.3-0.2-1.6-1.6-2-4.6c-0.4-2.9,0.5-2.8-0.5-2.9c-1-0.1-0.4-1.1-0.1-2.2c0.3-1-0.6-1.9-0.9-3.3
                                    c-0.3-1.4,1.6-2.4,2.3-1.1c0.6,1.3,2.2,2,3.2,1.8C52.7,75.5,53.5,74.9,54,74.8z" />
                                <path class="region" data-region_id="37"
                                    d="M95.4,121.7c0.9,1.1,6.4,1.9,9,1.5c2.6-0.3,2.9-1.8,4.7-2.3
                                    c1.9-0.5,3.1-3.2,5.1-3.6c1.9-0.4,3.2,0.4,4.6,1.3c1.3,0.8,7.2,0,7.2-1.2c0-0.2-0.2-0.6-0.2-0.6c-1-1.9-0.2-1.3,0.8-3.2
                                    c1-1.9,0.7-3,1.9-5.4c1.2-2.4-0.4-3.4,0-5.7c0.3-2.4-2-2.2-2.2-1c-0.2,1.2-2.9,2.7-3.4,1.7c-0.5-1,0-2.4-0.3-3.7
                                    c-0.3-1.3-0.8-3-1.2-7.6c-0.3-4.6,1-2.2,2-4c1-1.9-1-5.9-0.7-8.6c0.3-2.7,1.5-7.6,0-8.9c-1.2-1.1-0.4-2.1-0.2-2.7c0.1-0.6,1.2-5.8,0-6.9c-1.3-1.1-2.7-4.2-2.7-4.2s-2.8,4.9-5.1,4.8c-2.3-0.1-5.2-1.2-5.7-1.2c-0.5,0-1.4,0.3-1.8,1.2
                                    c-0.4,0.9-2.4,0.8-3.5,0c-1.2-0.8-1.8-0.1-3.5,0.3c-1.7,0.3-6.1,0.3-7.8,3c-1.1,1.8-0.7,4.1-0.7,4.1s1.4,5.6-4.8,3.1
                                    c-6.2-2.4-5.2,0-7.1,0.6c-1.9,0.6-3.6,3.5-5.4,5c-1.8,1.5-5.2,2.4-3.8,4.1c1.4,1.8,2.5,3.4,2,5.3c-0.4,1.9-3.1,3.5-2.4,5.1
                                    c0.8,1.6,2.8,2,5,2c2.2-0.1,2.6,1.8,0.9,4.4s-1.9,5.7-2.5,6.2c-1,0.9-1.9,1.8-1.9,1.8s0.8,2.8,0.8,4.4c0,0,8.4,3,9.2,3.5
                                    c0.8,0.5,2.3,2.4,1.5,4.1c0,0-0.4,2.2,4,1.9c0,0,3.6-4.7,1.1-7.8c0,0-2.3-2.2,1-3.5c3.3-1.4,2-3.4,4.7-3.5c2.7-0.2,4.9-1.5,5.7-0.8
                                    c0.8,0.8,4.6,4.2,3.1,5.7c-1.5,1.5-4.7,6.8-5.8,7.4c-1.1,0.6-2.7,0.5-2.6,1.5c0,0.2,0.5,2.1,0.5,2.1L95.4,121.7z" />
                                <path class="region" data-region_id="32"
                                    d="M119.7,56.3c0,0-2.8,4.9-5.1,4.8c-2.3-0.1-5.2-1.2-5.7-1.2
                                    c-0.5,0-1.4,0.3-1.8,1.2c-0.4,0.9-2.3,0.7-3.5,0c-1.5-0.9-1.8,0.2-3.7,0.3c-4.1,0.3-5.6,1.2-5.6,1.2c-0.7-3.7-3.5-3.4-3.5-3.4
                                    c-5.8-1.4-4.5-0.6-6.4-3.7c-1.9-3.1-3.7-1.4-3.7-1.4s-3.2,3.9-4,0.8c-0.8-3.1-1.9-0.5-1.9-0.5c-1.5,4.9-7.1,3.2-7.1,3.2l0-0.3
                                    c0,0,0.4-5.1,0.8-6.6c0.4-1.5,0.1-3.9-0.3-4.8c-0.3-0.8,0.1-1.5,0.1-1.5c2.8-6.1-1.8-4.4-3.4-4.8c-0.9-0.2-3.4-0.8-3.7-2
                                    c-0.3-1.3-1.1-3.8-1.1-5.8s1-2.7,1-3.7c0-1,1.4-4.4-7.1-8.9c-8.5-4.4-6.1-7.4-6.1-7.4c2.4-1.3,3.8-2.8,4.7-1.6
                                    c0.8,1.2,2.7,2.4,4.7,0.5c2-1.9,5.1-1.8,5.2-0.8c0.2,1,0.8,2.2,3.5,2c2.7-0.2,11.3,0.4,11.3-2.7c0-3.1,4.7-3.2,5.6-2.4
                                    c0.8,0.8,1.3,4.5,2-0.4c0.7-5,2.7-8.2,5.1-2.4c2.4,5.7,1.7,6.2,2.9,7.4c1.2,1.2,1.9,3.2,1.9,5.2c0,2,4.6,6.1,6.2,8.6
                                    c1.7,2.5,6.4,7.1,7.8,8.8c1,1.2,2.2,7.4,4.2,10.3c2,2.9,4.3,3.4,5.9,9.1c0.7,2.6,0.8,2.9,0.8,2.9" />
                                <path class="region" data-region_id="22" d="M95,121.2c0,0-0.5-1.8-0.5-2.1c-0.1-1,1.5-0.9,2.6-1.5
                                    c1.1-0.6,4.3-5.9,5.8-7.4c1.5-1.5-2.4-5-3.1-5.7c-0.8-0.8-3,0.6-5.7,0.8c-2.7,0.2-1.4,2.2-4.7,3.5c-3.3,1.3-1,3.5-1,3.5
                                    c2.6,2.7-0.8,7.7-0.8,7.7S92.8,119.6,95,121.2z" />
                                <path class="region" data-region_id="31" d="M67.7,57.8l0-0.3c0,0,0.4-5.1,0.8-6.6c0.4-1.5,0.1-3.9-0.3-4.8
                                    c-0.3-0.8,0.1-1.5,0.1-1.5c2.8-6.1-1.8-4.4-3.4-4.8c-0.9-0.2-3.4-0.8-3.7-2c-0.3-1.3-1.1-3.8-1.1-5.8s1-2.7,1-3.7
                                    c0-1,1.4-4.4-7.1-8.9c-8.5-4.4-6.1-7.4-6.1-7.4s-8.6,2.1-9.2,2.5s-3,2-3.9,2.2c-0.7,0.2-2.8,1,0,2.2s5.2,2.1,1.2,4.8
                                    c-4,2.7-4.5,0.9-2.9,2.7c1.6,1.8,1.2,3.5-3,5.5c0,0-4.1,3.3-1.9,4.9c0,0,0.8-0.3,0.8,3.1c0,0-0.3,0.8,1.9,0.2
                                    c2.3-0.6,4.4-0.6,5.1,0.5c0.7,1.1,2.5,3.9-2.2,7.6l-2.6,2.8c0,0,0.1,2.8-1.3,3.3c-1.5,0.5-2.1,1.9-0.9,3.6c1.2,1.7,4.5,5.4,4.6,5.8
                                    c0.1,0.5,2.3,5.4,9.4,3.1c0,0,2.7-1.6,7,0s5.1,1.3,5.1,1.3s2.2-4.2,3.1-4.7c0.9-0.5,3.3-0.9,4.5-1.6c1.2-0.7,4.2-3.3,4.2-3.3
                                    l0.6-0.5L67.7,57.8z" />
                                <path class="region" data-region_id="25" d="M59.6,95l-0.3,0.4c-0.9,1.3-0.8,1.1-1.1,1.4c-0.3,0.3-1.5,1.1-2.7,0.4
                                    c-1.3-0.7-3.7,0-4.1-5.7c-0.4-5.8,3.9-5,4.4-6.2c0,0,0.3-0.9,0.2-1.4s2.6,2.1,3.2,2.3c0.7,0.2,1.1,0.1,1.5,0.8
                                    c0.3,0.7,0.3,2.5,0.1,3.4c-0.2,0.9-0.5,3.1-0.6,3.4L59.6,95z" />
                                <path class="region" data-region_id="23" d="M31.1,51.1c0.3-3.5-1.3-5.5-3.8-5.7c-2.5-0.2-2.2,5.2-6.6,0
                                    c-4.4-5.2-0.8-4.9-1.5-6.2c-0.7-1.3-3.7-0.7-4.6-1.3c-0.8-0.7-2-1.5-0.7-3c1.4-1.5,1.7-2.5,3-3.9c1.4-1.3,2.4,0.6,4-0.7
                                    c0.6-0.5,1-3,2.7-2.2s2.6,2.4,3.2,3.2c0,0,0.7,1.4,3,0.9l0,0c0,0-4,3.2-1.8,4.8c0,0,0.8-0.3,0.8,3.1c0,0-0.3,0.8,1.9,0.2
                                    c2.3-0.6,4.4-0.6,5.1,0.5c0.7,1.1,2.5,3.9-2.2,7.6L31.2,51L31.1,51.1z" />
                                <path class="region" data-region_id="11" d="M36.5,45.3c0,0,4.6,0.6,5.5,1.3c0.9,0.7,3.3,0.3,3.7-1
                                    c0.4-1.3,2-0.5,2.8-1.3s0.8-1.9,0.4-2.9c-0.3-1-0.8-0.7-0.8-2.1c-0.1-1.3-1.3-3.1-2.6-4c-1.3-0.8-3,0-3.5,0.7
                                    c-0.6,0.7-5.6,5.2-5.6,5.2S37.3,42.6,36.5,45.3z" />
                                <path
                                    d="M52.4,75.8c-0.5,0.7-0.6,1.8,1,3.8c1,1.3,2.7,4.4,2.7,4.4l0,0
                                    c0.2,0.4-0.3,1.3-0.3,1.3C55.3,86.1,53,86,51.9,88l-0.3,0c0,0,0,0-1.3-0.3c-1.3-0.3-1.6-1.6-2-4.6c-0.4-2.9,0.5-2.8-0.5-2.9
                                    c-1-0.1-0.4-1.1-0.1-2.2c0.3-1-0.6-1.9-0.9-3.3c-0.3-1.4,1.7-2.4,2.3-1.1c0.8,1.8,3.4,1.9,3.4,1.9S52.5,75.8,52.4,75.8z" />
                                <path class="region" data-region_id="24"
                                    d="M31.5,136.6c0.2-0.5,0.7,0.2,2-0.1c1.3-0.3,2.9-1.1,4.9-0.7c2,0.4,4.6,2.8,4,6.8
                                    c-0.7,4-5.9,3.4-7.3,2.4c-1.1-0.8-0.1-1.3-2.8-2.2c-2.7-0.9-2-2.6-1.1-4C31.2,138.8,31.2,137.4,31.5,136.6z" />
                                <text transform="matrix(1 0 0 1 73.75 37)">강원도</text>
                                <text transform="matrix(1 0 0 1 93.25 91.75)">경북</text>
                                <text transform="matrix(1 0 0 1 76.75 137.5)">경남</text>
                                <text transform="matrix(1 0 0 1 40.75 118)">전북</text>
                                <text transform="matrix(1 0 0 1 24.25 163.75)">전남</text>
                                <text transform="matrix(1 0 0 1 20.5835 197.416)">제주</text>
                                <text transform="matrix(1 0 0 1 28.75 85.5)">충남</text>
                                <text transform="matrix(1 0 0 1 62 72.75)">충북</text>
                                <text transform="matrix(1 0 0 1 39 57.25)">경기도</text>
                                <text transform="matrix(1 0 0 1 41 43)">서울</text>
                                <text transform="matrix(1 0 0 1 88.75 113)">대구</text>
                                <!--text transform="matrix(1 0 0 1 45.5 82.5)">세종</text-->
                                <text transform="matrix(1 0 0 1 31.1606 143.1113)">광주</text>
                                <text transform="matrix(1 0 0 1 111.5 125.75)">울산</text>
                                <text transform="matrix(1 0 0 1 105.5 140.5)">부산</text>
                                <text transform="matrix(1 0 0 1 48.5 93.75)">대전</text>
                                <text transform="matrix(1 0 0 1 13.4165 42.9165)">인천</text>
                            </g>
                        </svg>



                        <!-- Pin 1: Gimpo (Popoz) -->
                        <div class="map-pin absolute top-[21%] left-[23%] group cursor-pointer" title="김포 포포즈">
                            <div
                                class="w-10 h-10 bg-[#1B2B48] rounded-full border-4 border-white shadow-lg flex items-center justify-center text-white relative z-10">
                                <i class="fas fa-paw"></i>
                            </div>
                            <div
                                class="absolute bottom-12 left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-lg shadow-xl text-xs font-bold whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-20 border border-gray-100 pointer-events-none">
                                포포즈 장례식장 김포점<br>
                                <span class="text-gray-400 font-normal">경기 김포시</span>
                            </div>
                        </div>

                        <!-- Pin 2: Bucheon (Gangmingming) -->
                        <div class="map-pin absolute top-[21%] left-[18%] group cursor-pointer" title="부천 강밍밍">
                            <div
                                class="w-10 h-10 bg-[#1B2B48] rounded-full border-4 border-white shadow-lg flex items-center justify-center text-white relative z-10">
                                <i class="fas fa-paw"></i>
                            </div>
                            <div
                                class="absolute bottom-12 left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-lg shadow-xl text-xs font-bold whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-20 border border-gray-100 pointer-events-none">
                                강밍밍 장례식장 부천점<br>
                                <span class="text-gray-400 font-normal">경기 부천시</span>
                            </div>
                        </div>

                        <!-- Pin 3: Gwangju (21 Grams) -->
                        <div class="map-pin absolute top-[38%] left-[26%] group cursor-pointer" title="경기광주 21그램">
                            <div
                                class="w-10 h-10 bg-[#1B2B48] rounded-full border-4 border-white shadow-lg flex items-center justify-center text-white relative z-10">
                                <i class="fas fa-paw"></i>
                            </div>
                            <div
                                class="absolute bottom-12 left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-lg shadow-xl text-xs font-bold whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-20 border border-gray-100 pointer-events-none">
                                21그램 경기광주점<br>
                                <span class="text-gray-400 font-normal">경기 광주시</span>
                            </div>
                        </div>

                        <!-- Pin 4: Seoul (Pet Forest) -->
                        <div class="map-pin absolute top-[21%] left-[31%] group cursor-pointer" title="서울 펫포레스트">
                            <div
                                class="w-10 h-10 bg-[#C5A065] rounded-full border-4 border-white shadow-lg flex items-center justify-center text-white relative z-10">
                                <i class="fas fa-star"></i>
                            </div>
                            <div
                                class="absolute bottom-12 left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-lg shadow-xl text-xs font-bold whitespace-nowrap opacity-100 z-20 border border-gray-100">
                                펫포레스트 서울점<br>
                                <span class="text-gray-400 font-normal">서울 강남구</span>
                            </div>
                        </div>
                    </div>

                    <!-- Zoom Controls -->
                    <div class="absolute bottom-6 right-6 flex flex-col gap-2 z-50">
                        <button id="btn-zoom-in"
                            class="w-10 h-10 bg-white rounded-lg shadow-md flex items-center justify-center text-gray-600 hover:bg-gray-50 border active:bg-gray-100">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button id="btn-zoom-reset"
                            class="w-10 h-10 bg-white rounded-lg shadow-md flex items-center justify-center text-gray-600 hover:bg-gray-50 border active:bg-gray-100">
                            <i class="fas fa-compress"></i>
                        </button>
                        <button id="btn-zoom-out"
                            class="w-10 h-10 bg-white rounded-lg shadow-md flex items-center justify-center text-gray-600 hover:bg-gray-50 border active:bg-gray-100">
                            <i class="fas fa-minus"></i>
                        </button>
                    </div>

                    <!-- Guide Text -->
                    <div
                        class="absolute top-4 left-4 bg-white/90 px-3 py-1 rounded-md text-xs text-gray-500 shadow-sm z-20 pointer-events-none">
                        * 지도 확대/축소가 가능합니다.
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- View Toggle Logic ---
            const btnList = document.getElementById('btn-list-view');
            const btnMap = document.getElementById('btn-map-view');
            const listView = document.getElementById('result-list');
            const mapView = document.getElementById('map-view');

            if (btnList && btnMap && listView && mapView) {
                btnList.addEventListener('click', () => {
                    listView.classList.remove('hidden');
                    mapView.classList.add('hidden');

                    btnList.classList.add('bg-[#1B2B48]', 'text-white');
                    btnList.classList.remove('bg-white', 'text-gray-600', 'border');

                    btnMap.classList.remove('bg-[#1B2B48]', 'text-white');
                    btnMap.classList.add('bg-white', 'text-gray-600', 'border');
                });

                btnMap.addEventListener('click', () => {
                    listView.classList.add('hidden');
                    mapView.classList.remove('hidden');

                    btnMap.classList.add('bg-[#1B2B48]', 'text-white');
                    btnMap.classList.remove('bg-white', 'text-gray-600', 'border');

                    btnList.classList.remove('bg-[#1B2B48]', 'text-white');
                    btnList.classList.add('bg-white', 'text-gray-600', 'border');
                });
            }

            // --- Map Zoom & Pan Logic ---
            let scale = 1;
            let panX = 0;
            let panY = 0;
            let isDragging = false;
            let startX = 0;
            let startY = 0;

            const ZOOM_STEP = 0.5;
            const MAX_ZOOM = 4;
            const MIN_ZOOM = 1;

            const mapContent = document.getElementById('map-content');
            // const mapView = document.getElementById('map-view'); // Already declared above
            const btnZoomIn = document.getElementById('btn-zoom-in');
            const btnZoomOut = document.getElementById('btn-zoom-out');
            const btnZoomReset = document.getElementById('btn-zoom-reset');

            function updateTransform() {
                if (mapContent) {
                    mapContent.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
                    // Update CSS variable so pins can counter-scale
                    mapContent.style.setProperty('--map-scale', scale);
                }
            }

            // Zoom Buttons
            if (btnZoomIn && btnZoomOut && btnZoomReset) {
                btnZoomIn.addEventListener('click', () => {
                    if (scale < MAX_ZOOM) {
                        scale += ZOOM_STEP;
                        updateTransform();
                    }
                });

                btnZoomOut.addEventListener('click', () => {
                    if (scale > MIN_ZOOM) {
                        scale -= ZOOM_STEP;
                        // Optional: Reset pan if zoomed out completely?
                        if (scale === 1) {
                            panX = 0;
                            panY = 0;
                        }
                        updateTransform();
                    }
                });

                btnZoomReset.addEventListener('click', () => {
                    scale = 1;
                    panX = 0;
                    panY = 0;
                    updateTransform();
                });
            }

            // Panning Events
            if (mapView) {
                mapView.addEventListener('mousedown', (e) => {
                    if (scale > 1) { // Only allow panning when zoomed in
                        isDragging = true;
                        startX = e.clientX - panX;
                        startY = e.clientY - panY;
                        mapView.classList.add('cursor-grabbing');
                    }
                });

                mapView.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    panX = e.clientX - startX;
                    panY = e.clientY - startY;
                    updateTransform();
                });

                window.addEventListener('mouseup', () => {
                    isDragging = false;
                    if (mapView) mapView.classList.remove('cursor-grabbing');
                });

                mapView.addEventListener('mouseleave', () => {
                    isDragging = false;
                });
            }

            // --- Filter Logic ---
            const checkboxes = document.querySelectorAll('.filter-checkbox');
            const items = document.querySelectorAll('.search-item');

            function filterItems() {
                const checkedRegions = Array.from(document.querySelectorAll('input[value="seoul"]:checked, input[value="gyeonggi"]:checked, input[value="incheon"]:checked'))
                    .map(cb => cb.value);

                const checkedFacilities = Array.from(document.querySelectorAll('input[value="visit"]:checked, input[value="ensa"]:checked, input[value="lucete"]:checked'))
                    .map(cb => cb.value);

                items.forEach(item => {
                    const region = item.getAttribute('data-region');
                    const facilities = item.getAttribute('data-facilities').split(',');

                    const regionMatch = checkedRegions.length === 0 || checkedRegions.includes(region);
                    const facilityMatch = checkedFacilities.every(f => facilities.includes(f));

                    if (regionMatch && facilityMatch) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }

            checkboxes.forEach(cb => {
                cb.addEventListener('change', filterItems);
            });

            // Initial run
            filterItems();
        });
    </script>
    <footer class="bg-gray-50 border-t py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 grid gap-8 md:grid-cols-4">
            <div class="col-span-1 md:col-span-2">
                <span class="font-bold text-xl text-[#1B2B48] mb-4 block">The On-sil</span>
                <p class="text-sm text-gray-500 mb-4">(주)더온실 | 대표: 조영호<br>문의: 1668-5165</p>
            </div>
            <div>
                <h3 class="font-semibold mb-4 text-sm">서비스</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><a href="search.html">장례식장 찾기</a></li>
                    <li><a href="guide.html">가이드</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold mb-4 text-sm">고객지원</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><a href="contact.html">문의하기</a></li>
                    <li><a href="terms.html">이용약관</a></li>
                </ul>
            </div>
        </div>
    </footer>
</body>

</html>