<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>On-sil - 반려동물 안심 장례 (Preview)</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1B2B48">
    <link rel="apple-touch-icon" href="icons/icon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: "#1B2B48", light: "#F5F5F0" },
                        secondary: { DEFAULT: "#FAFAFA", mint: "#E8F3F1" },
                        accent: { DEFAULT: "#C5A065" },
                    },
                    fontFamily: {
                        sans: ['Pretendard', 'sans-serif'],
                        serif: ['Nanum Myeongjo', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap');
    </style>
</head>

<body class="bg-gray-50 font-sans text-slate-900 antialiased">

    <!-- Header -->
    <header class="sticky top-0 z-50 w-full border-b bg-white/90 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <a href="index.html" class="flex items-center gap-2 font-bold text-xl text-[#1B2B48]">
                <span>On-sil</span>
            </a>
            <nav class="hidden md:flex gap-6">
                <a href="search.html" class="text-sm font-medium text-gray-600 hover:text-[#1B2B48]">장례식장 찾기</a>
                <a href="guide.html" class="text-sm font-medium text-gray-600 hover:text-[#1B2B48]">장례 가이드</a>
                <a href="memory.html" class="text-sm font-medium text-gray-600 hover:text-[#1B2B48]">추억 가이드</a>
                <a href="community.html" class="text-sm font-medium text-gray-600 hover:text-[#1B2B48]">후기</a>
            </nav>
            <div class="hidden md:flex items-center gap-4">
                <div id="auth-container" class="flex items-center">
                    <!-- Auth UI injected by JS -->
                </div>
                <button id="install-pwa-btn"
                    class="hidden bg-[#1B2B48] text-white hover:bg-[#2a4269] px-4 py-2 rounded-md text-sm font-medium transition-colors shadow-md items-center gap-2">
                    <i class="fas fa-download"></i> 앱 설치
                </button>
                <button
                    class="bg-[#C5A065] text-white hover:bg-[#B08D55] px-4 py-2 rounded-md text-sm font-medium transition-colors shadow-md flex items-center gap-2">
                    <i class="fas fa-phone"></i> 상담하기
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative w-full py-24 md:py-32 bg-[#FAFAFA] overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-b from-white/0 via-white/50 to-white pointer-events-none z-10">
        </div>
        <div
            class="absolute inset-0 opacity-10 bg-[url('https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?q=80&w=2517&auto=format&fit=crop')] bg-cover bg-center">
        </div>

        <div class="max-w-7xl mx-auto px-4 relative z-20 flex flex-col items-center text-center space-y-8">
            <div class="space-y-4 max-w-3xl mx-auto">
                <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-[#1B2B48] leading-tight">
                    반려동물 장례식장,<br />비교부터 예약까지.
                </h1>
                <p class="text-xl md:text-2xl font-serif text-gray-600">
                    어려운 결정에 늘 온실이 함께할게요.
                </p>
                <div class="pt-4">
                    <p
                        class="text-sm md:text-base text-gray-500 bg-white/80 backdrop-blur-sm py-2 px-4 rounded-full inline-block shadow-sm">
                        이제 안심하셔도 됩니다. <span class="text-[#1B2B48] font-bold">온실 안심 장례식장</span> 표시를 확인하세요.
                    </p>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 mt-8">
                <a href="search.html"
                    class="bg-[#1B2B48] text-white hover:bg-[#1B2B48]/90 px-8 py-4 rounded-md text-lg font-medium transition-colors shadow-lg inline-block text-center">
                    안심 장례식장 찾아보기
                </a>
                <a href="guide.html"
                    class="border border-gray-300 bg-white hover:bg-gray-50 px-8 py-4 rounded-md text-lg font-medium transition-colors inline-block text-center">
                    이별 준비 가이드
                </a>
            </div>
        </div>
    </section>

    <!-- Trust Section -->
    <section class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16 space-y-4">
                <h2 class="text-3xl font-bold text-[#1B2B48]">On-sil Promise</h2>
                <p class="text-gray-600 font-serif text-lg">보호자님이 장례에만 집중할 수 있도록, 온실이 약속합니다.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Feature 1 -->
                <div
                    class="flex flex-col items-center text-center p-8 rounded-2xl bg-[#FAFAFA] hover:bg-[#E8F3F1] transition-colors duration-300">
                    <div
                        class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-sm mb-6 text-[#1B2B48]">
                        <i class="fas fa-eye text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3 text-gray-800">참관 보장</h3>
                    <p class="text-gray-600 leading-relaxed break-keep">모든 장례 과정을 보호자가 직접 참관할 수 있는 장례식장만 소개합니다.</p>
                </div>
                <!-- Feature 2 -->
                <div
                    class="flex flex-col items-center text-center p-8 rounded-2xl bg-[#FAFAFA] hover:bg-[#E8F3F1] transition-colors duration-300">
                    <div
                        class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-sm mb-6 text-[#1B2B48]">
                        <i class="fas fa-check-circle text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3 text-gray-800">투명한 서비스</h3>
                    <p class="text-gray-600 leading-relaxed break-keep">불필요한 용품 강매 금지. 투명한 비용 공개로 안심할 수 있습니다.</p>
                </div>
                <!-- Feature 3 -->
                <div
                    class="flex flex-col items-center text-center p-8 rounded-2xl bg-[#FAFAFA] hover:bg-[#E8F3F1] transition-colors duration-300">
                    <div
                        class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-sm mb-6 text-[#1B2B48]">
                        <i class="fas fa-shield-alt text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3 text-gray-800">피해 보상제</h3>
                    <p class="text-gray-600 leading-relaxed break-keep">안심 정책 위반 시 최대 50만 원 보상 정책을 명시하여 책임을 다합니다.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-50 border-t py-12">
        <div class="max-w-7xl mx-auto px-4 grid gap-8 md:grid-cols-4">
            <div class="col-span-1 md:col-span-2">
                <span class="font-bold text-xl text-[#1B2B48] mb-4 block">On-sil</span>
                <p class="text-sm text-gray-500 mb-4">(주)더온실 | 대표: 조영호<br>문의: 1668-5165</p>
            </div>
            <div>
                <h3 class="font-semibold mb-4 text-sm">서비스</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><a href="search.html">장례식장 찾기</a></li>
                    <li><a href="guide.html">장례 가이드</a></li>
                    <li><a href="memory.html">추억 가이드</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold mb-4 text-sm">고객지원</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><a href="contact.html">문의하기</a></li>
                    <li><a href="terms.html">이용약관</a></li>
                </ul>
            </div>
        </div>
    </footer>
    <!-- Scripts -->
    <!-- Supabase CDN (Stable UMD Build) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

    <script>
        // Global Error Handler
        window.onerror = function (msg, url, line, col, error) {
            console.error("JS Error:", msg);
            return false;
        };

        const SUPABASE_URL = 'https://fkmcanwlcigofjhbfkzs.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_9OyB7n3foIalMmDxq1-_PA_s3xYfcJS';
        let authClient = null;

        // Initialize Supabase
        function getSupabase() {
            if (authClient) return authClient;
            try {
                if (window.supabase && window.supabase.createClient) {
                    authClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                    return authClient;
                }
                return null;
            } catch (e) {
                console.error("Supabase Init Error:", e);
                return null;
            }
        }

        // Update Auth UI
        async function updateAuthUI() {
            const authContainer = document.getElementById('auth-container');
            if (!authContainer) return;

            const sb = getSupabase();
            if (!sb) {
                // Fallback UI if SDK fails
                renderLoggedOutState(authContainer);
                return;
            }

            const { data: { session } } = await sb.auth.getSession();

            if (session) {
                renderLoggedInState(authContainer, session.user);
            } else {
                renderLoggedOutState(authContainer);
            }

            // Listen for auth changes
            sb.auth.onAuthStateChange((event, session) => {
                if (session) {
                    renderLoggedInState(authContainer, session.user);
                } else {
                    renderLoggedOutState(authContainer);
                }
            });
        }

        function renderLoggedOutState(container) {
            container.innerHTML = `
                <a href="login.html" class="text-sm font-medium text-gray-600 hover:text-[#1B2B48] mr-4">로그인</a>
                <a href="signup.html" class="bg-[#1B2B48] text-white hover:bg-[#2a4269] px-4 py-2 rounded-md text-sm font-medium transition-colors shadow-md">회원가입</a>
            `;
        }

        function renderLoggedInState(container, user) {
            const userName = user.user_metadata?.full_name || '사용자';
            container.innerHTML = `
                <span class="text-sm font-medium text-gray-600 mr-4">${userName}님</span>
                <button onclick="handleLogout()" class="text-sm font-medium text-gray-500 hover:text-red-500">로그아웃</button>
            `;
        }

        async function handleLogout() {
            const sb = getSupabase();
            if (sb) {
                await sb.auth.signOut();
                window.location.reload();
            }
        }

        // Run on load
        window.addEventListener('load', updateAuthUI);
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js');
            });
        }
    </script>
</body>

</html>